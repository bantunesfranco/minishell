GREEN='\033[0;32m'
RED='\033[0;31m'
RESET='\033[0m'
BOLD='\033[1m'

#!/bin/bash

help_func(){
	echo -e "\n\nrun - start minishell"
	echo "sy - run syntax error tests"
	echo "le - run lexer tests"
	echo "ex - run expansion tests"
	echo "help - display this message"
	echo "exit - exit tester"
	echo ""
}

help_arg(){
	echo -e "\n\nrun - start minishell"
	echo "sy - run syntax error tests"
	echo "le - run lexer tests"
	echo "ex - run expansion tests"
	echo "help - display this message"
	echo ""
}

readinput(){
	clear
	echo -e "\n${BOLD}What mode would you like to run :${RESET}"
	help_func
	echo -e ""
	while [[ $option != "exit" ]]
	do
		read option
		if [[ $option == "run" ]]
		then
			run_minishell
			help_func
		elif [[ $option == "sy" ]]
		then
			test_syntax
			help_func
		elif [[ $option == "le" ]]
		then
			test_lexer
			help_func
		elif [[ $option == "ex" ]]
		then
			test_expansion
			help_func
		elif [[ $option == "help" ]]
		then
			help_func
		elif [[ $option == "exit" ]]
		then
			break ;
		else
			echo -e "\nPlease input valid option"
			echo "help - for valid options"
		fi
		echo ""
	done
}

runoption(){
	if [[ $1 == "run" ]]
	then
		run_minishell
	elif [[ $1 == "sy" ]]
	then
		test_syntax
	elif [[ $1 == "le" ]]
	then
		test_lexer
	elif [[ $1 == "ex" ]]
	then
		test_expansion
	elif [[ $1 == "help" ]]
	then
		echo -e "\n\n${BOLD}Run ./parsing_test.sh with one of the following arguments or none for interactive input${RESET}"
		help_arg
	else
		echo -e "\n\n${BOLD}Run ./parsing_test.sh with one of the following arguments or none for interactive input${RESET}"
		help_arg
		read option
		runoption $option
	fi
	echo ""
}

main () {
	if [[ $# == 0 ]]
	then
		readinput
	else
		runoption $1
	fi
}

run_minishell () {
	echo hi
	make -C .
	./minishell
}

test_syntax () {
	# if all 
		./testing_files/scripts/syntax_error.sh
	# else
	# 	./testing_files/scripts/syntax_error.sh

}

test_lexer () {
	./testing_files/scripts/lexer_tester.sh
}

test_expansion () {
	./testing_files/scripts/expansion_tester.sh
}

# ./minishell

main $1
